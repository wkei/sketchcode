webpackJsonp([2,0],[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(23),o=n(r),s=i(80),u=n(s),c=i(27),d=n(c);o.default.config.debug={NODE_ENV:"production"}.DEBUG_MODE,new o.default({el:"#app",store:d.default,template:"<App/>",components:{App:u.default}})},,,,,,,,,,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(12),o=n(r),s=i(35),u=n(s),c={currentProjectId:null,projects:[]},d="sketch_code",a=window.localStorage;e.default={init:function(){var t=a.getItem(d);if(t){var e=JSON.parse(t);return(0,o.default)(e)}return a.setItem(d,(0,u.default)(c)),(0,o.default)(c)},update:function(t){a.setItem(d,(0,u.default)(t))}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={SWITCH_PROJECT:"SWITCH_PROJECT",ADD_PROJECT:"ADD_PROJECT",UPDATE_PROJECT:"UPDATE_PROJECT",DESTROY_PROJECT:"DESTROY_PROJECT"}},,,,,,,,,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={upper:function(t){return t.toString().toUpperCase()}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(11),o=n(r);e.default={switchProject:function(t,e){var i=t.commit;i(o.default.SWITCH_PROJECT,e)},addProject:function(t,e){var i=t.commit;i(o.default.ADD_PROJECT,e)},updateProject:function(t,e){var i=t.commit;i(o.default.UPDATE_PROJECT,e)},destroyProject:function(t,e){var i=t.commit;i(o.default.DESTROY_PROJECT,e)}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={currentProjectId:function(t){return t.currentProjectId},currentProject:function(t){return t.currentProjectId?t.projects.find(function(e){return e.id===t.currentProjectId}):null},projects:function(t){return t.projects},projectCount:function(t){return t.projects.length}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(23),o=n(r),s=i(3),u=n(s),c=i(25),d=n(c),a=i(26),l=n(a),h=i(28),f=n(h),p=i(10),m=n(p);o.default.use(u.default);var v=m.default.init();e.default=new u.default.Store({state:v,getters:l.default,actions:d.default,mutations:f.default})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){t.currentProjectId=e,p.default.update(t)}function o(t){var e=Date.now(),i={id:"p_"+e,name:"Untitled",html:"",css:"",js:"",created_at:e,modified_at:e};t.projects.push(i),r(t,i.id)}function s(t,e){var i=t.projects.find(function(t){return t.id===e.id});if(i){for(var n in e)i[n]=e[n];i.modified_at=Date.now()}p.default.update(t)}function u(t,e){var i=t.projects.find(function(t){return t.id===e}),n=t.projects.indexOf(i);t.projects.splice(n,1);var o=t.projects.sort(function(t,e){return t.modified_at<e.modified_at});o.length?r(t,o[0].id):r(t,null)}Object.defineProperty(e,"__esModule",{value:!0});var c,d=i(13),a=n(d),l=i(11),h=n(l),f=i(10),p=n(f);e.default=(c={},(0,a.default)(c,h.default.SWITCH_PROJECT,function(t,e){var i=e.id;r(t,i)}),(0,a.default)(c,h.default.ADD_PROJECT,function(t){o(t)}),(0,a.default)(c,h.default.UPDATE_PROJECT,function(t,e){s(t,e)}),(0,a.default)(c,h.default.DESTROY_PROJECT,function(t,e){var i=e.id;u(t,i)}),c)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=n(r),s=i(82),u=n(s),c=i(83),d=n(c),a=i(84),l=n(a),h=i(3);i(72),e.default={name:"app",data:function(){return{winWdith:0,minWidth:100,width:{projectList:200,editor:400},moving:!1,count:0}},components:{EditorWrapper:u.default,Preview:d.default,ProjectList:l.default},computed:(0,o.default)({},(0,h.mapGetters)(["currentProjectId","projectCount"]),{dev:function(){return"http:"===window.location.protocol},hasProject:function(){return this.projectCount>0},tipsStyle:function(){return{left:this.width.projectList+"px"}}}),created:function(){this.winWdith=window.innerWidth,window.addEventListener("resize",this.handleResize)},mounted:function(){this.initShortcut()},methods:{handleResize:function(){this.winWdith=window.innerWidth},resize:function(t,e){var i=this;this.cleanMouseEvent();var n=t.clientX,r=this.width[e],o=this.width["editor"===e?"projectList":"editor"];this.moving=!0,window.onmousemove=function(t){var s=t.clientX-n;r+s<i.minWidth?i.width[e]=i.minWidth:i.winWdith-(r+s)-o<i.minWidth?i.width[e]=i.winWdith-i.minWidth-o:i.width[e]=r+s},window.onmouseup=this.cleanMouseEvent},cleanMouseEvent:function(){this.moving=!1,window.onmousemove=null,window.onmouseup=null},initShortcut:function(){document.addEventListener("keydown",this.shortcutKeydown,!1),document.addEventListener("keyup",this.shortcutKeyup,!1);var t=this.$refs.previewRef.$el.querySelector("iframe").contentDocument;t.addEventListener("keydown",this.shortcutKeydown,!1),t.addEventListener("keyup",this.shortcutKeyup,!1)},shortcutKeydown:function(t){91===t.keyCode?this.commandKey=!0:!this.commandKey||78!==t.keyCode&&(75===t.keyCode,1)?this.commandKey&&8===t.keyCode&&this.distroyProject():this.newProject()},shortcutKeyup:function(t){91===t.keyCode&&(this.commandKey=!1)},newProject:function(){this.$store.dispatch("addProject")},distroyProject:function(){window.confirm("Are you sure to delete this project?")&&this.$store.dispatch("destroyProject",{id:this.currentProjectId})}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=n(r);i(70),i(71),i(15),i(39),i(14),i(16),i(69),i(38);var s=i(79),u=n(s),c=i(24),d=n(c);e.default={name:"Editor",props:["type","height","code","currentProjectId"],data:function(){return{input:"",codeMirror:null}},filters:d.default,watch:{currentProjectId:function(){this.initCode()}},mounted:function(){this.initEditor(),this.initCode()},methods:{initEditor:function(){var t={html:"htmlmixed",css:"css",js:"javascript"};this.codeMirror=(0,o.default)(this.$el.querySelector(".inputarea"),{lineNumbers:!0,mode:t[this.type],lineWrapping:!0,theme:"material",scrollbarStyle:"overlay"}),this.$el.querySelector(".CodeMirror-scroll").style.height=this.$el.clientHeight},initCode:function(){this.setCodeMirrorValue(this.code)},update:u.default.debounce(function(){this.$emit("updateCode",this.type,this.codeMirror.getValue().trim())},300),setCodeMirrorValue:function(t){this.codeMirror.getDoc().setValue(t)}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(13),o=n(r),s=i(4),u=n(s),c=i(81),d=n(c),a=i(3);e.default={name:"EditorWrapper",props:{width:Number},data:function(){return{winHeight:0,minHeight:50,height:{html:0,css:0,js:0}}},components:{Editor:d.default},computed:(0,u.default)({},(0,a.mapGetters)(["currentProjectId","currentProject"]),{editorWrapperWidth:function(){return{width:this.width+"px"}}}),watch:{currentProjectId:function(){this.$emit("initCode")}},created:function(){this.winHeight=window.innerHeight;for(var t in this.height)this.height[t]=this.winHeight/3;window.addEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.winHeight=window.innerHeight;var t=0;for(var e in this.height)t+=this.height[e];for(var i in this.height)this.height[i]=this.winHeight*this.height[i]/t},updateCode:function(t,e){this.$store.dispatch("updateProject",(0,o.default)({id:this.currentProject.id},t,e))},resizeEditor:function(t,e,i){var n=this;this.cleanMouseEvent();var r=t.clientY,o=this.height[e],s=this.height[i];document.onmousemove=function(t){var u=t.clientY-r;o+u<n.minHeight?(n.height[e]=n.minHeight,n.height[i]=o+s-n.minHeight):s-u<n.minHeight?(n.height[e]=o+s-n.minHeight,n.height[i]=n.minHeight):(n.height[i]=s-u,n.height[e]=o+u)},document.onmouseup=this.cleanMouseEvent},cleanMouseEvent:function(){document.onmousemove=null,document.onmouseup=null}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=n(r),s=i(3);e.default={name:"Preview",computed:(0,o.default)({},(0,s.mapGetters)(["currentProject"])),watch:{currentProject:{handler:function(t,e){t&&e?t.html===e.html&&t.js===t.js&&t.css!==t.css?this.updateStyle():this.update():t&&this.update()},deep:!0}},mounted:function(){this.currentProject&&this.update()},methods:{update:function(){var t=this.$refs.previewRef.contentDocument;t.body.innerHTML=this.currentProject.html;var e=document.createElement("script");e.type="text/javascript",e.id=this.currentProject.id+"_script",e.textContent=this.currentProject.js;var i=document.createElement("style");i.type="text/css",i.id=this.currentProject.id+"_style",i.textContent=this.currentProject.css,t.body.appendChild(e),t.body.appendChild(i)},updateStyle:function(){var t=this.$refs.previewRef.contentDocument,e=t.getElementById(this.currentProject.id+"_style");e.textContent=this.currentProject.css},cleanPreview:function(){var t=this.$refs.previewRef.contentDocument;t.body.innerHTML=""}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=n(r),s=i(85),u=n(s),c=i(3);e.default={name:"ProjectList",props:{width:Number},components:{ProjectName:u.default},computed:(0,o.default)({},(0,c.mapGetters)(["projects","currentProjectId"]),{sortedProjects:function(){return this.projects.slice().sort(function(t,e){return e.modified_at-t.modified_at})},projectListWidth:function(){return{width:this.width+"px"}}})}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ProjectName",props:{active:Boolean,project:Object,projectListWidth:String},data:function(){return{name:"",editMode:!1}},methods:{switchProject:function(){this.$store.dispatch("switchProject",{id:this.project.id})},switchEditMode:function(){var t=this;this.editMode=!this.editMode,this.editMode?(this.name=this.project.name,setTimeout(function(){t.$refs.nameInputRef.select()},1)):this.name=""},blurInput:function(){this.$refs.nameInputRef.blur()},save:function(){var t=this,e=this.name.trim();e===this.project.name?this.switchEditMode():""===e?(this.name=this.project.name,this.switchEditMode()):this.$store.dispatch("updateProject",{id:this.project.id,name:e}).then(function(){t.switchEditMode()})},unsave:function(){this.name=this.project.name,this.switchEditMode()}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,i){i(78);var n=i(2)(i(29),i(91),null,null);t.exports=n.exports},function(t,e,i){i(77);var n=i(2)(i(30),i(90),null,null);t.exports=n.exports},function(t,e,i){i(73);var n=i(2)(i(31),i(86),null,null);t.exports=n.exports},function(t,e,i){i(76);var n=i(2)(i(32),i(89),null,null);t.exports=n.exports},function(t,e,i){i(75);var n=i(2)(i(33),i(88),null,null);t.exports=n.exports},function(t,e,i){i(74);var n=i(2)(i(34),i(87),null,null);t.exports=n.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:t.editorWrapperWidth,attrs:{id:"editor-wrapper"}},[t.currentProject?i("div",[i("Editor",{attrs:{type:"html",height:t.height.html,code:t.currentProject.html,currentProjectId:t.currentProjectId},on:{updateCode:t.updateCode}},[i("div",{staticClass:"row-resizer",on:{mousedown:function(e){t.resizeEditor(e,"html","css")}}})]),t._v(" "),i("Editor",{attrs:{type:"css",height:t.height.css,code:t.currentProject.css,currentProjectId:t.currentProjectId},on:{updateCode:t.updateCode}},[i("div",{staticClass:"row-resizer",on:{mousedown:function(e){t.resizeEditor(e,"css","js")}}})]),t._v(" "),i("Editor",{attrs:{type:"js",height:t.height.js,code:t.currentProject.js,currentProjectId:t.currentProjectId},on:{updateCode:t.updateCode}})],1):t._e(),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item",class:{active:t.active,"edit-mode":t.editMode}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"name",on:{click:t.switchProject,dblclick:t.switchEditMode}},[t._v(t._s(t.project.name))]),t._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"},{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"nameInputRef",staticClass:"name-input",attrs:{type:"text"},domProps:{value:t._s(t.name)},on:{blur:t.save,keyup:[function(e){t._k(e.keyCode,"enter",13)||t.blurInput(e)},function(e){t._k(e.keyCode,"esc",27)||t.unsave(e)}],input:function(e){e.target.composing||(t.name=e.target.value)}}})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:t.projectListWidth,attrs:{id:"project-list"}},[i("h1",{staticClass:"logo"},[t._v("<SketchCode/>")]),t._v(" "),i("div",{staticClass:"list"},[i("div",{staticClass:"inner"},t._l(t.sortedProjects,function(e){return i("ProjectName",{attrs:{project:e,active:e.id===t.currentProjectId}})}))]),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"preview-wrapper"}},[i("iframe",{ref:"previewRef",attrs:{id:"preview"}}),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"editor editor-"+t.type,style:{height:t.height+"px"}},[i("div",{staticClass:"type"},[t._v(t._s(t.type))]),t._v(" "),i("div",{staticClass:"inputarea",on:{keyup:t.update}}),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("ProjectList",{attrs:{width:t.width.projectList}},[i("div",{staticClass:"resizer",on:{mousedown:function(e){t.resize(e,"projectList")}}})]),t._v(" "),i("EditorWrapper",{ref:"EditorWrapperRef",attrs:{width:t.width.editor}},[i("div",{staticClass:"resizer",on:{mousedown:function(e){t.resize(e,"editor")}}})]),t._v(" "),i("Preview",{ref:"previewRef"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.moving,expression:"moving"}],staticClass:"mask"})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.hasProject,expression:"!hasProject"}],style:t.tipsStyle,attrs:{id:"tips"}},[i("ul",[i("li",[t.dev?i("b",[t._v("⌘ + K")]):i("b",[t._v("⌘ + N")]),t._v(" to create a new project")]),t._v(" "),t._m(0),t._v(" "),t._m(1)])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",[i("b",[t._v("⌘ + Del")]),t._v(" to delete current project")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",[i("b",[t._v("Double Click")]),t._v(" project title to rename")])}]}}]);